var ll2eov=function(m,k){if(m>18.67&&m<19.73&&k>47.07&&k<47.78&&!isNaN(m)&&!isNaN(k)){var i,h,g,o,p,c,b,n,d,j,e,a;i=Math.PI/180,rk1=1.0031100083,g=1.0007197049,o=0.0818205679,p=19.0485718*i,c=6379743,b=0.99993,n=47.1*i,d=k*i,j=m*i,e=(Math.atan(rk1*Math.pow(Math.tan(Math.PI/4+d/2),g)*Math.pow((1-o*Math.sin(d))/(1+o*Math.sin(d)),g*o/2))-Math.PI/4)*2,a=(j-p)*g,eovxC=function(){return(c*b*Math.atan(Math.sin(a)/(Math.tan(e)*Math.sin(n)+Math.cos(a)*Math.cos(n)))+650000)},eovyC=function(){return(c/2*b*Math.log((1+Math.cos(n)*Math.sin(e)-Math.sin(n)*Math.cos(e)*Math.cos(a))/(1-Math.cos(n)*Math.sin(e)+Math.sin(n)*Math.cos(e)*Math.cos(a)))+200000)};m=Math.round(eovxC(d,j));k=Math.round(eovyC(d,j));return[m,k]}};var g_arrAddressList=[],g_Route=[],kamu=function(){return true},ShowAddress,FillAddress,HereIam;ShowAddress=FillAddress=HereIam=kamu;var FillRoute=function(){$("#utinfo").empty();var b=true,g,a,c,e,f;$("#ut").empty();g_Route.m_arrMains[0].m_arrSubs.reverse();e=[];while(g_Route.m_arrMains[0].m_arrSubs.length>0){c=g_Route.m_arrMains[0].m_arrSubs.pop();if(c.m_arrBkvLines.length>0){g=[];while(c.m_arrBkvLines.length>0){f=c.m_arrBkvLines.pop();if(c.m_arrBkvLines.length===0){g.push({jarat_szama:f.m_strName,css_osztaly:f.m_strClass,jarat_tipusa:f.m_strVType.toLowerCase(),jarat_menetrend_link:f.m_strLink,felszallo_megallo:c.m_strStopFrom,utazott_megallok:f.m_iStops,leszallo_megallo:c.m_strStopTo,utazas_hossza:c.m_iTravelMinutes})}}}else{a++}e.push(g)}$("#utvonaltervtemplate").tmpl(e).appendTo("#elsolepes > div")};var tervezz=function(c,e,b,d){var a=ll2eov(c,e),f=ll2eov(b,d);$.ajax({type:"GET",url:"http://bkv.utvonalterv.hu/NoTile.ashx?",dataType:"script",data:{Command:"Traffic",sessionID:"1449_2119731_5134837",iCommandID:1640,appID:"bkv",lang:"hu",arrIDs:"0|1",arrX:[a[0],f[0]].join("|"),arrY:[a[1],f[1]].join("|"),arrParsed:"undefined|undefined",strTrafficType:"bkv",iCarOptim:0,iBkvOptim:0,strTime:"2010/10/24/19:23",iMaxWalkDist:500},success:function(g){return true},error:function(g,i,h){alert("nem megy a bkv útvonaltervező, szólj g-nek!")}})};var geokod=function(b,f){var c,d;c=new google.maps.Geocoder();d={language:"hu",region:"hu",};if(b.address){d.address=b.address;d.bounds=new google.maps.LatLngBounds(new google.maps.LatLng(47.351501,18.925169),new google.maps.LatLng(47.613362,19.333916))}if(b.lat&&b.lng){var e=new google.maps.LatLng(b.lat,b.lng);d.latLng=e}if(b.selector){c.geocode(d,function(a,g){if(g===google.maps.GeocoderStatus.OK){f(a[0])}})}};